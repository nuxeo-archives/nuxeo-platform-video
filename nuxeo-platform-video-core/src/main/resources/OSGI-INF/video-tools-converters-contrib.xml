<component name="org.nuxeo.video.tools.converters">

	<require>org.nuxeo.ecm.platform.video.convert.converters</require>
	<extension target="org.nuxeo.ecm.core.convert.service.ConversionServiceImpl"
		point="converter">

		<converter name="convertToAVI"
			class="org.nuxeo.ecm.platform.video.convert.VideoConversionConverter">
			<sourceMimeType>video/mpeg</sourceMimeType>
			<sourceMimeType>video/mp4</sourceMimeType>
			<sourceMimeType>video/quicktime</sourceMimeType>
			<sourceMimeType>video/ogg</sourceMimeType>
			<sourceMimeType>video/x-ms-asf</sourceMimeType>
			<sourceMimeType>video/x-msvideo</sourceMimeType>
			<sourceMimeType>video/flv</sourceMimeType>
			<destinationMimeType>video/x-msvideo</destinationMimeType>
			<parameters>
				<parameter name="CommandLineName">convertToAVI</parameter>
				<parameter name="videoMimeType">video/x-msvideo</parameter>
				<parameter name="videoExtension">avi</parameter>
				<parameter name="tmpDirectoryPrefix">convertToAVI</parameter>
			</parameters>
		</converter>

	</extension>

	<require>org.nuxeo.ecm.platform.commandline.executor.service.defaultContrib
	</require>
	<extension
		target="org.nuxeo.ecm.platform.commandline.executor.service.CommandLineExecutorComponent"
		point="command">
	    <command name="convertToAVI" enabled="true">
	      <commandLine>ffmpeg</commandLine>
	      <parameterString> -i #{inFilePath} -s #{width}x#{height} -q:v 0 -c:v mpeg4 -c:a ac3 #{outFilePath}</parameterString>
	      <installationDirective>You need to install ffmpeg.
	      </installationDirective>
	    </command>

	</extension>

</component>

